webpackJsonp([4],{301:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{sideBarStatus:e.sideBarToggle,settingStatus:e.settingStatus,currentFilters:e.currentFilters}}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=t(1),l=n(c),u=(t(220),t(171)),p=(t(281),t(285)),f=t(287),m=t(294),d=t(302),h=n(d),y=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={id:""},e}return i(t,e),s(t,[{key:"inputChange",value:function(e){this.setState({id:e.target.value})}},{key:"inputSubmit",value:function(){this.state.id&&this.props.submitCallBack(this.state.id)}},{key:"componentWillMount",value:function(){this.props.initValue&&this.setState({id:this.props.initValue})}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{className:"search-input"},l.default.createElement("i",{className:"iconfont icon-search"}),l.default.createElement("input",{type:"text",value:this.state.id,onChange:function(t){return e.inputChange(t)},placeholder:"请输入博文ID来查询对应的评论"}),l.default.createElement("button",{onClick:function(){return e.inputSubmit()}},"提交"))}}]),t}(c.Component),b=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"no-comment"},l.default.createElement("i",{className:"iconfont icon-warn"}),"该博文没有相关评论")}}]),t}(c.Component),v=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={topicId:"",filters:[],toolBar:[{type:"reducer",name:"设置",icon:"iconfont icon-settings",callBack:"toggleSetting"}],list:[]},e}return i(t,e),s(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,f.changeMenu)(3)),this.props.dispatch((0,f.setFilters)(this.state.filters)),this.props.dispatch((0,f.setToolBar)(this.state.toolBar)),this.props.params.topic_id&&(this.setState({topicId:this.props.params.topic_id}),this.refreshList(this.props.params.topic_id))}},{key:"refreshList",value:function(e){var t=this;e&&this.props.dispatch((0,m.fetchGets)("/comment/page/"+e,{},function(e){t.setState({list:e})},"CommentList"))}},{key:"submitCallBack",value:function(e){this.setState({topicId:e}),this.refreshList(e)}},{key:"deleteComment",value:function(e){var t=this;this.props.dispatch((0,f.setConfirmDialog)({title:"确认删除？",confirmCallback:function(){t.props.dispatch((0,f.closeConfirmDialog)()),p.Tool.get("/token").then(function(n){p.Tool.post("/comment/remove/"+e,{token:n.token}).then(function(e){t.props.dispatch((0,f.showMessage)({type:0===e.code?"success":"warn",text:e.msg})),0===e.code&&t.refreshList(t.state.topicId)}).catch(function(e){t.props.dispatch((0,f.showMessage)({type:"danger",text:"网络错误，请稍后重试"}))})}).catch(function(e){t.props.dispatch((0,f.showMessage)({type:"danger",text:"网络错误，请稍后重试"}))})}}))}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{className:this.props.sideBarStatus?"comm-container wide":"comm-container"},l.default.createElement(y,{initValue:this.props.params.topic_id,submitCallBack:function(t){return e.submitCallBack(t)}}),this.state.list.length>0?this.state.list.map(function(t,n){return l.default.createElement(h.default,{key:n,comment:t,onDelete:function(t){return e.deleteComment(t)},settingStatus:e.props.settingStatus})}):this.state.topicId?l.default.createElement(b,null):null)}}]),t}(c.Component);v.propTypes={sideBarStatus:c.PropTypes.bool.isRequired,settingStatus:c.PropTypes.bool.isRequired,currentFilters:c.PropTypes.array.isRequired},exports.default=(0,u.connect)(r)(v)},302:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=t(1),c=n(s),l=(t(220),t(285)),u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.comment,o=t.settingStatus;return c.default.createElement("div",{className:"comment-row"+(o?" hover":"")},c.default.createElement("div",{className:"comment-author"},n.icon?c.default.createElement("img",{src:n.icon}):c.default.createElement("div",{className:"default-img"},c.default.createElement("i",{className:"iconfont icon-people"})),c.default.createElement("p",{className:"author-name"},n.author)),c.default.createElement("p",{className:"comment-content",title:n.content},n.content),c.default.createElement("div",{className:"comment-statistics"},c.default.createElement("div",{className:"item"},c.default.createElement("i",{className:"iconfont icon-appreciate"}),c.default.createElement("span",null,l.Tool.numberFormat(n.zan_count))),c.default.createElement("div",{className:"item"},c.default.createElement("i",{className:"iconfont icon-appreciate rotate-180"}),c.default.createElement("span",null,l.Tool.numberFormat(n.cai_count))),c.default.createElement("div",{className:"item"},c.default.createElement("i",{className:"iconfont icon-location"}),c.default.createElement("span",null,n.author_ip))),c.default.createElement("div",{className:"action-delete",onClick:function(){return e.props.onDelete(n._id)}},c.default.createElement("i",{className:"iconfont icon-delete"})))}}]),t}(s.Component);exports.default=u,u.propTypes={comment:s.PropTypes.object.isRequired,settingStatus:s.PropTypes.bool.isRequired,onDelete:s.PropTypes.func.isRequired}}});
//# sourceMappingURL=Comments.js.map